# ãƒ˜ãƒ«ãƒ—æ©Ÿèƒ½å®Ÿè£…è¨ˆç”»ï¼ˆplan_friendly.mdãƒ™ãƒ¼ã‚¹ï¼‰

## æ¦‚è¦

`plan_friendly.md`ã®å†…å®¹ã‚’å®Ÿè£…ã—ã€æ®µéšçš„ã«ãƒ˜ãƒ«ãƒ—ã‚’æ˜ã‚Šä¸‹ã’ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã‚’æä¾›ã—ã¾ã™ã€‚

## ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã®è¨­è¨ˆæ€æƒ³

### æ®µéšçš„ãƒ˜ãƒ«ãƒ—ã®æµã‚Œ

1. **ãƒ¬ãƒ™ãƒ«0ï¼ˆé€šå¸¸ãƒ¢ãƒ¼ãƒ‰ï¼‰**: é€šå¸¸ã®ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½
2. **ãƒ¬ãƒ™ãƒ«1ï¼ˆå…¨ä½“æ¦‚è¦ï¼‰**: ã€Œä½¿ã„æ–¹ã‚’æ•™ãˆã¦ã€â†’ 4ã¤ã®æ©Ÿèƒ½ã‚’ç´¹ä»‹
3. **ãƒ¬ãƒ™ãƒ«2ï¼ˆæ©Ÿèƒ½åˆ¥è©³ç´°ï¼‰**: æ•°å­—ï¼ˆ1-4ï¼‰å…¥åŠ› â†’ å„æ©Ÿèƒ½ã®è©³ç´°èª¬æ˜

### ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã®è€ƒæ…®ç‚¹

- **è‡ªç„¶ãªä¼šè©±**: æŠ€è¡“ç”¨èªã‚’ä½¿ã‚ãšã€ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªå¿œç­”
- **èª¤æ¤œçŸ¥é˜²æ­¢**: ã€Œä½¿ã„æ–¹ã€ã ã‘ã§ã¯æ¤œçŸ¥ã—ãªã„ã€æ˜ç¢ºãªã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰åˆ¤å®š
- **ã‚¹ãƒ ãƒ¼ã‚ºãªå¾©å¸°**: é€šå¸¸ã®ãƒãƒ£ãƒƒãƒˆå…¥åŠ›ã§è‡ªå‹•çš„ã«ãƒ˜ãƒ«ãƒ—ãƒ¢ãƒ¼ãƒ‰ã‚’çµ‚äº†
- **æ®µéšçš„ãªæƒ…å ±æç¤º**: ä¸€åº¦ã«å…¨ã¦ã‚’è¡¨ç¤ºã›ãšã€å¿…è¦ãªéƒ¨åˆ†ã ã‘ã‚’è¡¨ç¤º

---

## å®Ÿè£…è¨ˆç”»

### 1. ãƒ˜ãƒ«ãƒ—ãƒãƒ³ãƒ‰ãƒ©ã®ä½œæˆ

**ä¿®æ­£ã™ã‚‹å ´æ‰€**: `/app/Morizo-aiv2/core/help_handler.py`ï¼ˆæ–°è¦ä½œæˆï¼‰

**å®Ÿè£…å†…å®¹**:

```python
#!/usr/bin/env python3
"""
HelpHandler - ãƒ˜ãƒ«ãƒ—æ©Ÿèƒ½ãƒãƒ³ãƒ‰ãƒ©

æ®µéšçš„ãªãƒ˜ãƒ«ãƒ—å¿œç­”ã‚’ç”Ÿæˆã™ã‚‹
"""

from typing import Optional
from config.loggers import GenericLogger


class HelpHandler:
    """ãƒ˜ãƒ«ãƒ—æ©Ÿèƒ½ãƒãƒ³ãƒ‰ãƒ©"""
    
    def __init__(self):
        self.logger = GenericLogger("core", "help_handler")
    
    def generate_overview(self) -> str:
        """å…¨ä½“æ¦‚è¦ã®å¿œç­”ã‚’ç”Ÿæˆ"""
        return """Morizo AIã«ã¯ã€ä¸»ã«4ã¤ã®ä¾¿åˆ©ãªæ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚

1. **åœ¨åº«ç®¡ç†** - å†·è”µåº«ã‚„ãƒ‘ãƒ³ãƒˆãƒªãƒ¼ã«ã‚ã‚‹é£Ÿæã‚’ç®¡ç†ã§ãã¾ã™
2. **çŒ®ç«‹ææ¡ˆï¼ˆä¸€æ‹¬ï¼‰** - åœ¨åº«ã‹ã‚‰ä¸€æ°—ã«çŒ®ç«‹ã‚’è€ƒãˆã¦ãã‚Œã¾ã™
3. **çŒ®ç«‹ææ¡ˆï¼ˆæ®µéšçš„ï¼‰** - ä¸»èœã‹ã‚‰é †ç•ªã«é¸ã‚“ã§ã„ã‘ã¾ã™
4. **ä¾¿åˆ©ãªè£œåŠ©æ©Ÿèƒ½** - éå»ã®çŒ®ç«‹ã‚’è¦‹ãŸã‚Šã€ãƒ¬ã‚·ãƒ”ã‚’ä¿å­˜ã—ãŸã‚Š

ã©ã®æ©Ÿèƒ½ã«ã¤ã„ã¦çŸ¥ã‚ŠãŸã„ã§ã™ã‹ï¼Ÿï¼ˆ1ã€œ4ã®æ•°å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼‰"""
    
    def generate_inventory_detail(self) -> str:
        """åœ¨åº«ç®¡ç†æ©Ÿèƒ½ã®è©³ç´°å¿œç­”ã‚’ç”Ÿæˆ"""
        return """åœ¨åº«ç®¡ç†æ©Ÿèƒ½ã§ã¯ã€ãƒãƒ£ãƒƒãƒˆã§ç°¡å˜ã«é£Ÿæã®è¿½åŠ ãƒ»å‰Šé™¤ãƒ»å¤‰æ›´ãƒ»ç¢ºèªãŒã§ãã¾ã™ã€‚

### é£Ÿæã‚’è¿½åŠ ã™ã‚‹

ã€Œå¤§æ ¹ã‚’ï¼‘æœ¬è¿½åŠ ã—ã¦ã€ã¨å…¥åŠ›ã™ã‚‹ã ã‘ã§ã€åœ¨åº«ã«è¿½åŠ ã•ã‚Œã¾ã™ã€‚

**ä½¿ã„æ–¹ã®ä¾‹**:
- å¤§æ ¹ã‚’ï¼‘æœ¬è¿½åŠ ã—ã¦
- ã‚Šã‚“ã”ã‚’5å€‹è¿½åŠ ã—ã¦
- ç‰›ä¹³ã‚’1Lè¿½åŠ ã—ã¦

æ•°é‡ã‚„å˜ä½ã‚’çœç•¥ã—ã¦ã‚‚å¤§ä¸ˆå¤«ã§ã™ã€‚ãã®ã¾ã¾è¿½åŠ ã•ã‚Œã¾ã™ã€‚

**ç¢ºèªã¯ä¸è¦**: ã™ãã«è¿½åŠ ã•ã‚Œã‚‹ã®ã§ã€å¾…ã¤æ™‚é–“ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

### é£Ÿæã‚’å‰Šé™¤ã™ã‚‹

ã€Œç‰›ä¹³ã‚’å‰Šé™¤ã—ã¦ã€ã¨å…¥åŠ›ã™ã‚‹ã¨ã€åœ¨åº«ã‹ã‚‰å‰Šé™¤ã•ã‚Œã¾ã™ã€‚

**åŒã˜é£ŸæãŒè¤‡æ•°ã‚ã‚‹å ´åˆ**:
ã‚‚ã—åŒã˜é£ŸæãŒè¤‡æ•°ã‚ã‚‹å ´åˆã¯ã€æ¬¡ã®ã‚ˆã†ã«èã‹ã‚Œã¾ã™ã€‚ã“ã®å ´åˆã¯ã€ä¸Šè¨˜ã®é¸æŠè‚¢ã‹ã‚‰é¸ã‚“ã§ç­”ãˆã¦ãã ã•ã„ã€‚

**ç¢ºèªã‚’é¿ã‘ãŸã„å ´åˆ**:
æœ€åˆã‹ã‚‰ã€Œæœ€æ–°ã®ç‰›ä¹³ã‚’å‰Šé™¤ã—ã¦ã€ã€Œå¤ã„ç‰›ä¹³ã‚’å‰Šé™¤ã—ã¦ã€ã€Œå…¨éƒ¨ã®ç‰›ä¹³ã‚’å‰Šé™¤ã—ã¦ã€ã¨è¨€ãˆã°ã€ç¢ºèªãªã—ã§å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚

### é£Ÿæã®æ•°é‡ãªã©ã‚’å¤‰æ›´ã™ã‚‹

ã€Œã‚¸ãƒ£ã‚¬ã‚¤ãƒ¢ã‚’ï¼’å€‹ã«å¤‰ãˆã¦ã€ã¨å…¥åŠ›ã™ã‚‹ã¨ã€æ•°é‡ã‚’å¤‰æ›´ã§ãã¾ã™ã€‚

**å¤‰æ›´ã§ãã‚‹å†…å®¹**:
- æ•°é‡: ã€Œã‚¸ãƒ£ã‚¬ã‚¤ãƒ¢ã‚’ï¼’å€‹ã«å¤‰ãˆã¦ã€
- å˜ä½: ã€Œç‰›ä¹³ã®å˜ä½ã‚’ãƒ‘ãƒƒã‚¯ã«å¤‰ãˆã¦ã€
- ä¿å­˜å ´æ‰€: ã€Œç‰›ä¹³ã®ä¿å­˜å ´æ‰€ã‚’å†·å‡åº«ã«å¤‰ãˆã¦ã€

**ç¢ºèªã‚’é¿ã‘ãŸã„å ´åˆ**:
ã€Œæœ€æ–°ã®ã€ã€Œå¤ã„ã€ã€Œå…¨éƒ¨ã®ã€ã‚’æœ€åˆã«ã¤ã‘ã‚‹ã¨ã€ç¢ºèªãªã—ã§å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚

### åœ¨åº«ã‚’ç¢ºèªã™ã‚‹

ã€Œåœ¨åº«ã‚’æ•™ãˆã¦ã€ã¨å…¥åŠ›ã™ã‚‹ã¨ã€ä»Šã‚ã‚‹é£Ÿæã®ä¸€è¦§ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

**ç¢ºèªã¯ä¸è¦**: ã™ãã«è¡¨ç¤ºã•ã‚Œã‚‹ã®ã§ã€å¾…ã¤æ™‚é–“ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

ä»–ã«çŸ¥ã‚ŠãŸã„ã“ã¨ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ"""
    
    def generate_menu_bulk_detail(self) -> str:
        """çŒ®ç«‹ä¸€æ‹¬ææ¡ˆæ©Ÿèƒ½ã®è©³ç´°å¿œç­”ã‚’ç”Ÿæˆ"""
        return """åœ¨åº«ã«ã‚ã‚‹é£Ÿæã‹ã‚‰ã€ä¸»èœãƒ»å‰¯èœãƒ»æ±ç‰©ã‚’ä¸€æ°—ã«ææ¡ˆã—ã¦ãã‚Œã‚‹æ©Ÿèƒ½ã§ã™ã€‚

### ä½¿ã„æ–¹

æ¬¡ã®ã‚ˆã†ãªè¨€ã„æ–¹ã§çŒ®ç«‹ã‚’ææ¡ˆã—ã¦ã‚‚ã‚‰ãˆã¾ã™ï¼š
- çŒ®ç«‹ã‚’æ•™ãˆã¦
- ãƒ¬ã‚·ãƒ”ã‚’ææ¡ˆã—ã¦
- åœ¨åº«ã‹ã‚‰ä½œã‚Œã‚‹ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¯ï¼Ÿ
- ä»Šæ—¥ã®çŒ®ç«‹ã‚’è€ƒãˆã¦

**ç¢ºèªã¯ä¸è¦**: ã™ãã«ææ¡ˆãŒå§‹ã¾ã‚Šã¾ã™ã€‚

### ã©ã‚“ãªçŒ®ç«‹ãŒææ¡ˆã•ã‚Œã‚‹ã®ï¼Ÿ

åœ¨åº«ã®é£Ÿæã‹ã‚‰ã€2ç¨®é¡ã®çŒ®ç«‹ã‚’ææ¡ˆã—ã¾ã™ï¼š
1. **æ–°ã—ã„çŒ®ç«‹**: ã‚ãªãŸã®åœ¨åº«ã«åˆã‚ã›ã¦ã€ç‹¬å‰µçš„ãªçŒ®ç«‹ã‚’è€ƒãˆã¾ã™
2. **éå»ã®é¡ä¼¼çŒ®ç«‹**: ã“ã‚Œã¾ã§ã«ä½œã£ãŸã“ã¨ãŒã‚ã‚‹ã‚ˆã†ãªã€è¦ªã—ã¿ã‚„ã™ã„çŒ®ç«‹ã‚’ææ¡ˆã—ã¾ã™

ã©ã¡ã‚‰ã‚‚ã€ä¸»èœãƒ»å‰¯èœãƒ»æ±ç‰©ãŒã‚»ãƒƒãƒˆã«ãªã£ã¦ã„ã¾ã™ã€‚

### ãƒ¬ã‚·ãƒ”ã®è©³ç´°ã‚‚è¦‹ã‚Œã‚‹ï¼Ÿ

ã¯ã„ï¼ææ¡ˆã•ã‚ŒãŸçŒ®ç«‹ã®å„ãƒ¬ã‚·ãƒ”ã«ã¤ã„ã¦ã€ãƒ¬ã‚·ãƒ”ãƒšãƒ¼ã‚¸ã¸ã®ãƒªãƒ³ã‚¯ã‚‚ä¸€ç·’ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€è©³ã—ã„ä½œã‚Šæ–¹ã‚’è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

### æ³¨æ„ç‚¹

- åœ¨åº«ãŒç©ºã£ã½ã ã¨ã€ææ¡ˆãŒé›£ã—ã„å ´åˆãŒã‚ã‚Šã¾ã™
- éå»14æ—¥é–“ã«ä½œã£ãŸçŒ®ç«‹ã¯ã€é‡è¤‡ã—ãªã„ã‚ˆã†ã«é…æ…®ã•ã‚Œã¾ã™

ä»–ã«çŸ¥ã‚ŠãŸã„ã“ã¨ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ"""
    
    def generate_menu_staged_detail(self) -> str:
        """çŒ®ç«‹ææ¡ˆï¼ˆæ®µéšçš„ï¼‰æ©Ÿèƒ½ã®è©³ç´°å¿œç­”ã‚’ç”Ÿæˆ"""
        return """ä¸»èœã‹ã‚‰é †ç•ªã«é¸ã‚“ã§ã„ãã€æ®µéšçš„ãªçŒ®ç«‹ææ¡ˆæ©Ÿèƒ½ã§ã™ã€‚

### ä¸»èœã‚’é¸ã¶

ã¾ãšã¯ä¸»èœã‹ã‚‰é¸ã³ã¾ã™ã€‚

**ä½¿ã„æ–¹ã®ä¾‹**:
- ä¸»èœã‚’5ä»¶ææ¡ˆã—ã¦
- ãƒ¬ãƒ³ã‚³ãƒ³ã‚’ä½¿ã£ãŸä¸»èœã‚’æ•™ãˆã¦
- ãƒ¡ã‚¤ãƒ³ã‚’ææ¡ˆã—ã¦

**ä¸»èœã‚’æŒ‡å®šã—ãŸã„å ´åˆ**:
ã€Œãƒ¬ãƒ³ã‚³ãƒ³ã‚’ä½¿ã£ãŸä¸»èœã‚’æ•™ãˆã¦ã€ã®ã‚ˆã†ã«ã€é£Ÿæã‚’æŒ‡å®šã™ã‚‹ã¨ã€ãã®é£Ÿæã‚’ä½¿ã£ãŸä¸»èœãŒå„ªå…ˆçš„ã«ææ¡ˆã•ã‚Œã¾ã™ã€‚

**é£Ÿæã‚’æŒ‡å®šã—ãªã„å ´åˆ**:
é£Ÿæã‚’æŒ‡å®šã›ãšã«ã€Œä¸»èœã‚’5ä»¶ææ¡ˆã—ã¦ã€ã¨è¨€ã†ã¨ã€æ¬¡ã®ã‚ˆã†ã«èã‹ã‚Œã¾ã™ï¼š

ã€Œãªã«ã‹ä¸»ãªé£Ÿæã‚’æŒ‡å®šã—ã¾ã™ã‹ï¼Ÿãã‚Œã¨ã‚‚ä»Šã®åœ¨åº«ã‹ã‚‰ä½œã‚Œã‚‹ä¸»èœã‚’ææ¡ˆã—ã¾ã—ã‚‡ã†ã‹ï¼Ÿã€

ã©ã¡ã‚‰ã‹ã‚’é¸ã‚“ã§ãã ã•ã„ã€‚

**ä¸»èœã®å€™è£œãŒè¡¨ç¤ºã•ã‚Œã¾ã™**:
5ä»¶ã®ä¸»èœå€™è£œãŒç•ªå·ä»˜ãã§è¡¨ç¤ºã•ã‚Œã‚‹ã®ã§ã€æ°—ã«å…¥ã£ãŸã‚‚ã®ã‚’é¸ã‚“ã§ãã ã•ã„ã€‚æ°—ã«å…¥ã‚‰ãªã‘ã‚Œã°ã€Œä»–ã®ææ¡ˆã‚’è¦‹ã‚‹ã€ãƒœã‚¿ãƒ³ã§ã€è¿½åŠ ã§5ä»¶ãšã¤ææ¡ˆã—ã¦ã‚‚ã‚‰ãˆã¾ã™ã€‚

### å‰¯èœã‚’é¸ã¶

ä¸»èœã‚’é¸ã‚“ã ã‚‰ã€æ¬¡ã¯å‰¯èœã§ã™ã€‚

ä¸»èœã§ä½¿ã£ã¦ã„ãªã„é£Ÿæã‚’å„ªå…ˆçš„ã«ä½¿ã£ãŸå‰¯èœãŒææ¡ˆã•ã‚Œã¾ã™ã€‚ç„¡é§„ãªãé£Ÿæã‚’ä½¿ãˆã¾ã™ã­ï¼

**å‰¯èœã®å€™è£œãŒè¡¨ç¤ºã•ã‚Œã¾ã™**:
5ä»¶ã®å‰¯èœå€™è£œãŒè¡¨ç¤ºã•ã‚Œã‚‹ã®ã§ã€é¸ã‚“ã§ãã ã•ã„ã€‚ã€Œä»–ã®ææ¡ˆã‚’è¦‹ã‚‹ã€ãƒœã‚¿ãƒ³ã§è¿½åŠ ææ¡ˆã‚‚å¯èƒ½ã§ã™ã€‚

### æ±ç‰©ã‚’é¸ã¶

å‰¯èœã‚’é¸ã‚“ã ã‚‰ã€æœ€å¾Œã¯æ±ç‰©ã§ã™ã€‚

- å’Œé£Ÿã®çŒ®ç«‹ã®å ´åˆã¯ã€Œå‘³å™Œæ±ã€
- ãã‚Œä»¥å¤–ã®å ´åˆã¯ã€Œã‚¹ãƒ¼ãƒ—ã€

ä¸»èœãƒ»å‰¯èœã§ä½¿ã£ã¦ã„ãªã„é£Ÿæã‚’å„ªå…ˆçš„ã«ä½¿ã£ãŸæ±ç‰©ãŒææ¡ˆã•ã‚Œã¾ã™ã€‚

**æ±ç‰©ã®å€™è£œãŒè¡¨ç¤ºã•ã‚Œã¾ã™**:
5ä»¶ã®æ±ç‰©å€™è£œãŒè¡¨ç¤ºã•ã‚Œã‚‹ã®ã§ã€é¸ã‚“ã§ãã ã•ã„ã€‚ã€Œä»–ã®ææ¡ˆã‚’è¦‹ã‚‹ã€ãƒœã‚¿ãƒ³ã§è¿½åŠ ææ¡ˆã‚‚å¯èƒ½ã§ã™ã€‚

### è¿½åŠ ææ¡ˆæ©Ÿèƒ½ï¼ˆã‚‚ã£ã¨è¦‹ãŸã„ï¼ï¼‰

ææ¡ˆã•ã‚ŒãŸå€™è£œã«æ°—ã«å…¥ã£ãŸã‚‚ã®ãŒãªã„å ´åˆã€ã€Œä»–ã®ææ¡ˆã‚’è¦‹ã‚‹ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€è¿½åŠ ã§5ä»¶ãšã¤ææ¡ˆã—ã¦ã‚‚ã‚‰ãˆã¾ã™ã€‚

**ä½•åº¦ã§ã‚‚å¯èƒ½**: ç´å¾—ã™ã‚‹ã¾ã§ã€ä½•åº¦ã§ã‚‚è¿½åŠ ææ¡ˆãŒã§ãã¾ã™ã€‚

### é¸ã‚“ã çŒ®ç«‹ã‚’ä¿å­˜ã™ã‚‹

ä¸»èœãƒ»å‰¯èœãƒ»æ±ç‰©ã‚’å…¨ã¦é¸ã³çµ‚ã‚ã£ãŸã‚‰ã€ç”»é¢ã«è¡¨ç¤ºã•ã‚ŒãŸã€Œä¿å­˜ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€çŒ®ç«‹ã‚’å±¥æ­´ã«ä¿å­˜ã§ãã¾ã™ã€‚

ä»–ã«çŸ¥ã‚ŠãŸã„ã“ã¨ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ"""
    
    def generate_auxiliary_detail(self) -> str:
        """è£œåŠ©æ©Ÿèƒ½ã®è©³ç´°å¿œç­”ã‚’ç”Ÿæˆ"""
        return """ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»é¢ã‹ã‚‰ã€åœ¨åº«ä¸€è¦§ã‚„ãƒ¬ã‚·ãƒ”å±¥æ­´ã‚’ç¢ºèªã§ãã‚‹ä¾¿åˆ©ãªæ©Ÿèƒ½ã§ã™ã€‚

### åœ¨åº«ä¸€è¦§ã‚’ç¢ºèªã™ã‚‹

ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»é¢ã‹ã‚‰ã€ç¾åœ¨ã®åœ¨åº«ä¸€è¦§ã‚’ç¢ºèªã§ãã¾ã™ã€‚

**ä½¿ã„æ–¹**:
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»é¢ã§ã€Œåœ¨åº«ä¸€è¦§ã€ã‚’é–‹ã
- ã¾ãŸã¯ãƒãƒ£ãƒƒãƒˆã§ã€Œåœ¨åº«ã‚’æ•™ãˆã¦ã€ã¨å…¥åŠ›

**ç¢ºèªã¯ä¸è¦**: ã™ãã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

åœ¨åº«ã‚’è¿½åŠ ãƒ»å‰Šé™¤ãƒ»å¤‰æ›´ã™ã‚‹ã¨ã€ã“ã®ä¸€è¦§ã«ã™ãåæ˜ ã•ã‚Œã¾ã™ã€‚

### ãƒ¬ã‚·ãƒ”å±¥æ­´ã‚’ç¢ºèªã™ã‚‹

ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»é¢ã‹ã‚‰ã€éå»ã«ä½œã£ãŸçŒ®ç«‹ã®å±¥æ­´ã‚’ç¢ºèªã§ãã¾ã™ã€‚

**ä½¿ã„æ–¹**:
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»é¢ã§ã€Œãƒ¬ã‚·ãƒ”å±¥æ­´ã€ã‚’é–‹ã
- ã¾ãŸã¯ãƒãƒ£ãƒƒãƒˆã§ã€Œéå»ã®çŒ®ç«‹ã‚’æ•™ãˆã¦ã€ã¨å…¥åŠ›

**ç¢ºèªã¯ä¸è¦**: ã™ãã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

éå»14æ—¥é–“ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ã®çŒ®ç«‹ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

**å±¥æ­´ã¯ã©ã†ã‚„ã£ã¦ä¿å­˜ã•ã‚Œã‚‹ã®ï¼Ÿ**
æ®µéšçš„é¸æŠã§ä¸»èœãƒ»å‰¯èœãƒ»æ±ç‰©ã‚’é¸ã³çµ‚ã‚ã£ã¦ã€ç”»é¢ã«è¡¨ç¤ºã•ã‚ŒãŸã€Œä¿å­˜ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€å±¥æ­´ã¨ã—ã¦ä¿å­˜ã•ã‚Œã¾ã™ã€‚ä¿å­˜ã—ãŸçŒ®ç«‹ã¯ã€ã“ã®å±¥æ­´ä¸€è¦§ã‹ã‚‰ã„ã¤ã§ã‚‚è¦‹è¿”ã™ã“ã¨ãŒã§ãã¾ã™ã€‚

ä»–ã«çŸ¥ã‚ŠãŸã„ã“ã¨ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ"""
    
    def generate_detail(self, detail_number: int) -> Optional[str]:
        """æ©Ÿèƒ½åˆ¥è©³ç´°ã®å¿œç­”ã‚’ç”Ÿæˆ
        
        Args:
            detail_number: 1-4ã®æ•°å­—ï¼ˆåœ¨åº«/çŒ®ç«‹ä¸€æ‹¬/çŒ®ç«‹æ®µéšçš„/è£œåŠ©æ©Ÿèƒ½ï¼‰
        
        Returns:
            å¿œç­”æ–‡å­—åˆ—ï¼ˆç„¡åŠ¹ãªæ•°å­—ã®å ´åˆã¯Noneï¼‰
        """
        handlers = {
            1: self.generate_inventory_detail,
            2: self.generate_menu_bulk_detail,
            3: self.generate_menu_staged_detail,
            4: self.generate_auxiliary_detail
        }
        
        handler = handlers.get(detail_number)
        if handler:
            return handler()
        return None
```

**ä¿®æ­£ã®ç†ç”±**: 
- `plan_friendly.md`ã®å†…å®¹ã‚’ãã®ã¾ã¾å®Ÿè£…ã«åæ˜ 
- ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªå¿œç­”æ–‡ã‚’ç”Ÿæˆ
- ã‚³ãƒ¼ãƒ‰ã®å¯èª­æ€§ã¨ä¿å®ˆæ€§ã‚’å‘ä¸Š

**ä¿®æ­£ã®å½±éŸ¿**: æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«ã®è¿½åŠ ã®ã¿ï¼ˆæ—¢å­˜æ©Ÿèƒ½ã¸ã®å½±éŸ¿ãªã—ï¼‰

---

### 2. ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ç®¡ç†ã®æ‹¡å¼µ

**ä¿®æ­£ã™ã‚‹å ´æ‰€**: `/app/Morizo-aiv2/services/session/models/base.py` ã¾ãŸã¯ `/app/Morizo-aiv2/services/session/service.py`

**å®Ÿè£…å†…å®¹**:

ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ã«ãƒ˜ãƒ«ãƒ—çŠ¶æ…‹ã‚’è¿½åŠ ï¼š

```python
# Sessionã‚¯ãƒ©ã‚¹ã«è¿½åŠ 
help_state: Optional[str] = None  # null, "overview", "detail_1", "detail_2", "detail_3", "detail_4"

# SessionServiceã«ãƒ˜ãƒ«ãƒ—çŠ¶æ…‹ç®¡ç†ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ 
async def set_help_state(
    self,
    sse_session_id: str,
    user_id: str,
    help_state: Optional[str]
) -> None:
    """ãƒ˜ãƒ«ãƒ—çŠ¶æ…‹ã‚’è¨­å®š
    
    Args:
        sse_session_id: SSEã‚»ãƒƒã‚·ãƒ§ãƒ³ID
        user_id: ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
        help_state: "overview", "detail_1", "detail_2", "detail_3", "detail_4", ã¾ãŸã¯ None
    """
    session = await self.get_session(sse_session_id, user_id)
    if session:
        session.set_help_state(help_state)
        await self.update_session(sse_session_id, user_id, session)

async def get_help_state(
    self,
    sse_session_id: str,
    user_id: str
) -> Optional[str]:
    """ãƒ˜ãƒ«ãƒ—çŠ¶æ…‹ã‚’å–å¾—"""
    session = await self.get_session(sse_session_id, user_id)
    if session:
        return session.get_help_state()
    return None

async def clear_help_state(
    self,
    sse_session_id: str,
    user_id: str
) -> None:
    """ãƒ˜ãƒ«ãƒ—çŠ¶æ…‹ã‚’ã‚¯ãƒªã‚¢ï¼ˆé€šå¸¸ãƒ¢ãƒ¼ãƒ‰ã«æˆ»ã‚‹ï¼‰"""
    await self.set_help_state(sse_session_id, user_id, None)
```

**ä¿®æ­£ã®ç†ç”±**: ãƒ˜ãƒ«ãƒ—ã®æ®µéšï¼ˆå…¨ä½“æ¦‚è¦â†’æ©Ÿèƒ½åˆ¥è©³ç´°ï¼‰ã‚’ç®¡ç†ã™ã‚‹ãŸã‚

**ä¿®æ­£ã®å½±éŸ¿**: ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã«æ–°è¦ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ï¼ˆæ—¢å­˜æ©Ÿèƒ½ã¸ã®å½±éŸ¿ã¯æœ€å°é™ï¼‰

---

### 3. TrueReactAgentã«ãƒ˜ãƒ«ãƒ—æ¤œçŸ¥æ©Ÿèƒ½ã‚’è¿½åŠ 

**ä¿®æ­£ã™ã‚‹å ´æ‰€**: `/app/Morizo-aiv2/core/agent.py` ã® `process_request()` ãƒ¡ã‚½ãƒƒãƒ‰ï¼ˆç´„89è¡Œç›®ä»˜è¿‘ï¼‰

**å®Ÿè£…å†…å®¹**:

```python
async def process_request(self, user_request: str, user_id: str, token: str, sse_session_id: Optional[str] = None, is_confirmation_response: bool = False) -> Dict[str, Any]:
    """
    Process user request through the complete ReAct loop.
    """
    # Set callbacks on first invocation
    if self.confirmation_handler.process_request_callback is None:
        self._set_confirmation_handler_callback()
    if self.selection_handler.process_request_callback is None:
        self._set_selection_handler_callbacks()
    
    try:
        self.logger.info(f"ğŸ¯ [AGENT] Starting request processing for user {user_id}")
        self.logger.info(f"ğŸ“ [AGENT] User request: '{user_request}'")
        
        # ============================================================
        # ãƒ˜ãƒ«ãƒ—æ©Ÿèƒ½ã®å‡¦ç†ï¼ˆé€šå¸¸ã®ã‚¿ã‚¹ã‚¯å‡¦ç†ã‚ˆã‚Šå„ªå…ˆï¼‰
        # ============================================================
        help_handler = HelpHandler()
        help_state = await self.session_service.get_help_state(sse_session_id, user_id) if sse_session_id else None
        
        # ãƒ˜ãƒ«ãƒ—ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®æ¤œçŸ¥ï¼ˆèª¤æ¤œçŸ¥é˜²æ­¢ã®ãŸã‚ã€æ˜ç¢ºãªã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®ã¿ï¼‰
        is_help_request = self._is_help_keyword(user_request)
        
        if is_help_request or help_state:
            # ãƒ˜ãƒ«ãƒ—ãƒ¢ãƒ¼ãƒ‰ã®å‡¦ç†
            response = await self._handle_help_mode(
                user_request=user_request,
                help_state=help_state,
                help_handler=help_handler,
                sse_session_id=sse_session_id,
                user_id=user_id
            )
            return {"response": response}
        
        # ============================================================
        # é€šå¸¸ã®ã‚¿ã‚¹ã‚¯å‡¦ç†ï¼ˆæ—¢å­˜ã®å‡¦ç†ï¼‰
        # ============================================================
        # ... æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ ...
```

**ãƒ˜ãƒ«ãƒ—ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œçŸ¥ãƒ¡ã‚½ãƒƒãƒ‰**:

```python
def _is_help_keyword(self, user_request: str) -> bool:
    """ãƒ˜ãƒ«ãƒ—ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’æ¤œçŸ¥ï¼ˆèª¤æ¤œçŸ¥é˜²æ­¢ï¼‰"""
    help_keywords = [
        "ä½¿ã„æ–¹ã‚’æ•™ãˆã¦",
        "ä½¿ã„æ–¹ã‚’çŸ¥ã‚ŠãŸã„",
        "ä½¿ã„æ–¹ã‚’èª¬æ˜ã—ã¦",
        "ãƒ˜ãƒ«ãƒ—",
        "help",
        "ä½¿ã„æ–¹"
    ]
    
    user_request_lower = user_request.strip().lower()
    
    # ã€Œä½¿ã„æ–¹ã‚’æ•™ãˆã¦ã€ãªã©ã®æ˜ç¢ºãªè¡¨ç¾ã®ã¿æ¤œçŸ¥
    # ã€Œä½¿ã„æ–¹ã€ã ã‘ã§ã¯æ¤œçŸ¥ã—ãªã„ï¼ˆèª¤æ¤œçŸ¥é˜²æ­¢ï¼‰
    for keyword in help_keywords:
        if keyword in user_request_lower:
            # ã€Œä½¿ã„æ–¹ã€å˜ç‹¬ã®å ´åˆã¯ã€å‰å¾Œã«ç‰¹å®šã®æ–‡å­—ãŒã‚ã‚‹å ´åˆã®ã¿æ¤œçŸ¥
            if keyword == "ä½¿ã„æ–¹":
                # ã€Œä½¿ã„æ–¹ã‚’ã€ã‚„ã€Œä½¿ã„æ–¹ã¯ã€ãªã©ã®å®Œå…¨ä¸€è‡´ã‚’è¦æ±‚
                patterns = ["ä½¿ã„æ–¹ã‚’", "ä½¿ã„æ–¹ã¯", "ä½¿ã„æ–¹ã«ã¤ã„ã¦", "ä½¿ã„æ–¹ã£ã¦", "ä½¿ã„æ–¹ æ•™ãˆã¦"]
                if not any(pattern in user_request_lower for pattern in patterns):
                    continue
            return True
    
    return False
```

**ãƒ˜ãƒ«ãƒ—ãƒ¢ãƒ¼ãƒ‰å‡¦ç†ãƒ¡ã‚½ãƒƒãƒ‰**:

```python
async def _handle_help_mode(
    self,
    user_request: str,
    help_state: Optional[str],
    help_handler: HelpHandler,
    sse_session_id: Optional[str],
    user_id: str
) -> str:
    """ãƒ˜ãƒ«ãƒ—ãƒ¢ãƒ¼ãƒ‰ã®å‡¦ç†
    
    Args:
        user_request: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
        help_state: ç¾åœ¨ã®ãƒ˜ãƒ«ãƒ—çŠ¶æ…‹ï¼ˆNone, "overview", "detail_1-4"ï¼‰
        help_handler: HelpHandlerã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹
        sse_session_id: SSEã‚»ãƒƒã‚·ãƒ§ãƒ³ID
        user_id: ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
    
    Returns:
        ãƒ˜ãƒ«ãƒ—å¿œç­”æ–‡å­—åˆ—
    """
    user_request_stripped = user_request.strip()
    
    # æ•°å­—å…¥åŠ›ã®æ¤œçŸ¥ï¼ˆ1-4ï¼‰
    if user_request_stripped.isdigit():
        detail_number = int(user_request_stripped)
        if 1 <= detail_number <= 4:
            # æ©Ÿèƒ½åˆ¥è©³ç´°ã®è¡¨ç¤º
            detail_response = help_handler.generate_detail(detail_number)
            if detail_response:
                # ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ã‚’æ›´æ–°
                if sse_session_id:
                    await self.session_service.set_help_state(
                        sse_session_id, user_id, f"detail_{detail_number}"
                    )
                return detail_response
    
    # ãƒ˜ãƒ«ãƒ—ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®æ¤œçŸ¥ï¼ˆå…¨ä½“æ¦‚è¦ã®è¡¨ç¤ºï¼‰
    if self._is_help_keyword(user_request):
        # ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ã‚’æ›´æ–°
        if sse_session_id:
            await self.session_service.set_help_state(
                sse_session_id, user_id, "overview"
            )
        return help_handler.generate_overview()
    
    # æ—¢ã«ãƒ˜ãƒ«ãƒ—ãƒ¢ãƒ¼ãƒ‰ã®å ´åˆï¼ˆhelp_stateãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ï¼‰
    if help_state:
        # æ•°å­—å…¥åŠ›ã‚’å†åº¦ãƒã‚§ãƒƒã‚¯ï¼ˆã‚»ãƒƒã‚·ãƒ§ãƒ³ã‹ã‚‰å¾©å…ƒã—ãŸå ´åˆï¼‰
        if user_request_stripped.isdigit():
            detail_number = int(user_request_stripped)
            if 1 <= detail_number <= 4:
                detail_response = help_handler.generate_detail(detail_number)
                if detail_response:
                    if sse_session_id:
                        await self.session_service.set_help_state(
                            sse_session_id, user_id, f"detail_{detail_number}"
                        )
                    return detail_response
        
        # ãƒ˜ãƒ«ãƒ—ãƒ¢ãƒ¼ãƒ‰ä¸­ã«é€šå¸¸ã®ãƒãƒ£ãƒƒãƒˆå…¥åŠ›ãŒã‚ã£ãŸå ´åˆ
        # ãƒ˜ãƒ«ãƒ—ãƒ¢ãƒ¼ãƒ‰ã‚’çµ‚äº†ã—ã¦é€šå¸¸å‡¦ç†ã«é€²ã‚€
        if sse_session_id:
            await self.session_service.clear_help_state(sse_session_id, user_id)
        # Noneã‚’è¿”ã™ã¨ã€é€šå¸¸ã®ã‚¿ã‚¹ã‚¯å‡¦ç†ã«é€²ã‚€
    
    # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: ãƒ˜ãƒ«ãƒ—ãƒ¢ãƒ¼ãƒ‰ã‚’é–‹å§‹
    if sse_session_id:
        await self.session_service.set_help_state(
            sse_session_id, user_id, "overview"
        )
    return help_handler.generate_overview()
```

**ä¿®æ­£ã®ç†ç”±**: 
- ãƒ˜ãƒ«ãƒ—ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€šå¸¸ã®ã‚¿ã‚¹ã‚¯å‡¦ç†ã‚ˆã‚Šå…ˆã«åˆ¤å®š
- æ®µéšçš„ãªãƒ˜ãƒ«ãƒ—ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã‚’å®Ÿç¾
- èª¤æ¤œçŸ¥ã‚’é¿ã‘ã‚‹æ˜ç¢ºãªã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰åˆ¤å®š

**ä¿®æ­£ã®å½±éŸ¿**: 
- æ—¢å­˜ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‡¦ç†ãƒ•ãƒ­ãƒ¼ã«æ¡ä»¶åˆ†å²ã‚’è¿½åŠ ï¼ˆæ—¢å­˜æ©Ÿèƒ½ã¸ã®å½±éŸ¿ã¯æœ€å°é™ï¼‰
- ãƒ˜ãƒ«ãƒ—ãƒ¢ãƒ¼ãƒ‰ä¸­ã§ã‚‚é€šå¸¸ã®ãƒãƒ£ãƒƒãƒˆå…¥åŠ›ã§å¾©å¸°å¯èƒ½

---

### 4. ã‚¤ãƒ³ãƒãƒ¼ãƒˆã®è¿½åŠ 

**ä¿®æ­£ã™ã‚‹å ´æ‰€**: `/app/Morizo-aiv2/core/agent.py` ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆéƒ¨åˆ†

**å®Ÿè£…å†…å®¹**:

```python
from core.help_handler import HelpHandler
```

---

## ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ãƒ•ãƒ­ãƒ¼

### ã‚·ãƒŠãƒªã‚ª1: åˆã‚ã¦ãƒ˜ãƒ«ãƒ—ã‚’ä½¿ã†

1. ãƒ¦ãƒ¼ã‚¶ãƒ¼: ã€Œä½¿ã„æ–¹ã‚’æ•™ãˆã¦ã€
2. ã‚·ã‚¹ãƒ†ãƒ : å…¨ä½“æ¦‚è¦ã‚’è¡¨ç¤ºï¼ˆ`help_state: "overview"`ï¼‰
3. ãƒ¦ãƒ¼ã‚¶ãƒ¼: ã€Œ1ã€
4. ã‚·ã‚¹ãƒ†ãƒ : åœ¨åº«ç®¡ç†æ©Ÿèƒ½ã®è©³ç´°ã‚’è¡¨ç¤ºï¼ˆ`help_state: "detail_1"`ï¼‰
5. ãƒ¦ãƒ¼ã‚¶ãƒ¼: ã€Œåœ¨åº«ã‚’æ•™ãˆã¦ã€ï¼ˆé€šå¸¸ã®ãƒãƒ£ãƒƒãƒˆå…¥åŠ›ï¼‰
6. ã‚·ã‚¹ãƒ†ãƒ : ãƒ˜ãƒ«ãƒ—ãƒ¢ãƒ¼ãƒ‰ã‚’çµ‚äº†ã—ã¦é€šå¸¸å‡¦ç†ã‚’å®Ÿè¡Œï¼ˆ`help_state: null`ï¼‰

### ã‚·ãƒŠãƒªã‚ª2: ãƒ˜ãƒ«ãƒ—ã‹ã‚‰é€šå¸¸ã®ãƒãƒ£ãƒƒãƒˆã«å¾©å¸°

1. ãƒ¦ãƒ¼ã‚¶ãƒ¼: ã€Œä½¿ã„æ–¹ã‚’æ•™ãˆã¦ã€
2. ã‚·ã‚¹ãƒ†ãƒ : å…¨ä½“æ¦‚è¦ã‚’è¡¨ç¤ºï¼ˆ`help_state: "overview"`ï¼‰
3. ãƒ¦ãƒ¼ã‚¶ãƒ¼: ã€Œå¤§æ ¹ã‚’ï¼‘æœ¬è¿½åŠ ã—ã¦ã€ï¼ˆé€šå¸¸ã®ãƒãƒ£ãƒƒãƒˆå…¥åŠ›ï¼‰
4. ã‚·ã‚¹ãƒ†ãƒ : ãƒ˜ãƒ«ãƒ—ãƒ¢ãƒ¼ãƒ‰ã‚’è‡ªå‹•çš„ã«çµ‚äº†ã—ã€åœ¨åº«è¿½åŠ å‡¦ç†ã‚’å®Ÿè¡Œï¼ˆ`help_state: null`ï¼‰

### ã‚·ãƒŠãƒªã‚ª3: è¤‡æ•°ã®æ©Ÿèƒ½è©³ç´°ã‚’é †ç•ªã«è¦‹ã‚‹

1. ãƒ¦ãƒ¼ã‚¶ãƒ¼: ã€Œä½¿ã„æ–¹ã‚’æ•™ãˆã¦ã€
2. ã‚·ã‚¹ãƒ†ãƒ : å…¨ä½“æ¦‚è¦ã‚’è¡¨ç¤ºï¼ˆ`help_state: "overview"`ï¼‰
3. ãƒ¦ãƒ¼ã‚¶ãƒ¼: ã€Œ1ã€
4. ã‚·ã‚¹ãƒ†ãƒ : åœ¨åº«ç®¡ç†æ©Ÿèƒ½ã®è©³ç´°ã‚’è¡¨ç¤ºï¼ˆ`help_state: "detail_1"`ï¼‰
5. ãƒ¦ãƒ¼ã‚¶ãƒ¼: ã€Œ2ã€
6. ã‚·ã‚¹ãƒ†ãƒ : çŒ®ç«‹ä¸€æ‹¬ææ¡ˆã®è©³ç´°ã‚’è¡¨ç¤ºï¼ˆ`help_state: "detail_2"`ï¼‰

---

## å®Ÿè£…é †åº

1. **ãƒ˜ãƒ«ãƒ—ãƒãƒ³ãƒ‰ãƒ©ã®ä½œæˆ**ï¼ˆä¿®æ­£1ï¼‰
   - `core/help_handler.py`ã‚’ä½œæˆ
   - `plan_friendly.md`ã®å†…å®¹ã‚’å®Ÿè£…ã«åæ˜ 

2. **ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ç®¡ç†ã®æ‹¡å¼µ**ï¼ˆä¿®æ­£2ï¼‰
   - `Session`ã‚¯ãƒ©ã‚¹ã«`help_state`ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¿½åŠ 
   - `SessionService`ã«ãƒ˜ãƒ«ãƒ—çŠ¶æ…‹ç®¡ç†ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ 

3. **TrueReactAgentã«ãƒ˜ãƒ«ãƒ—æ¤œçŸ¥æ©Ÿèƒ½ã‚’è¿½åŠ **ï¼ˆä¿®æ­£3ï¼‰
   - `_is_help_keyword()`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ 
   - `_handle_help_mode()`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ 
   - `process_request()`ãƒ¡ã‚½ãƒƒãƒ‰ã®å…ˆé ­ã«ãƒ˜ãƒ«ãƒ—å‡¦ç†ã‚’è¿½åŠ 

4. **ã‚¤ãƒ³ãƒãƒ¼ãƒˆã®è¿½åŠ **ï¼ˆä¿®æ­£4ï¼‰
   - `HelpHandler`ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚’è¿½åŠ 

---

## ãƒ†ã‚¹ãƒˆé …ç›®

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

1. **ãƒ˜ãƒ«ãƒ—å…¨ä½“æ¦‚è¦ã®è¡¨ç¤º**
   - ã€Œä½¿ã„æ–¹ã‚’æ•™ãˆã¦ã€ã§å…¨ä½“æ¦‚è¦ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨
   - ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ãŒ `help_state: "overview"` ã«ãªã‚‹ã“ã¨

2. **æ©Ÿèƒ½åˆ¥è©³ç´°ã®è¡¨ç¤º**
   - ã€Œ1ã€ã§åœ¨åº«ç®¡ç†æ©Ÿèƒ½ã®è©³ç´°ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨
   - ã€Œ2ã€ã§çŒ®ç«‹ä¸€æ‹¬ææ¡ˆã®è©³ç´°ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨
   - ã€Œ3ã€ã§æ®µéšçš„ææ¡ˆã®è©³ç´°ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨
   - ã€Œ4ã€ã§è£œåŠ©æ©Ÿèƒ½ã®è©³ç´°ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨
   - å„è©³ç´°è¡¨ç¤ºæ™‚ã«ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ãŒæ­£ã—ãæ›´æ–°ã•ã‚Œã‚‹ã“ã¨

3. **ãƒ˜ãƒ«ãƒ—ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®æ¤œçŸ¥**
   - ã€Œä½¿ã„æ–¹ã‚’æ•™ãˆã¦ã€ã§æ¤œçŸ¥ã•ã‚Œã‚‹ã“ã¨
   - ã€Œä½¿ã„æ–¹ã€ã ã‘ã§ã¯æ¤œçŸ¥ã•ã‚Œãªã„ã“ã¨ï¼ˆèª¤æ¤œçŸ¥é˜²æ­¢ï¼‰
   - ã€Œä½¿ã„æ–¹ã‚’ã€ã§æ¤œçŸ¥ã•ã‚Œã‚‹ã“ã¨

4. **é€šå¸¸ã®ãƒãƒ£ãƒƒãƒˆã¸ã®å¾©å¸°**
   - ãƒ˜ãƒ«ãƒ—ãƒ¢ãƒ¼ãƒ‰ä¸­ã«é€šå¸¸ã®ãƒãƒ£ãƒƒãƒˆå…¥åŠ›ã§è‡ªå‹•çš„ã«å¾©å¸°ã™ã‚‹ã“ã¨
   - å¾©å¸°æ™‚ã«ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ãŒ `help_state: null` ã«ãªã‚‹ã“ã¨

5. **ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ã®ç®¡ç†**
   - ãƒ˜ãƒ«ãƒ—çŠ¶æ…‹ãŒæ­£ã—ãä¿å­˜ãƒ»å–å¾—ã•ã‚Œã‚‹ã“ã¨
   - ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒãªã„å ´åˆã§ã‚‚ãƒ˜ãƒ«ãƒ—ãŒå‹•ä½œã™ã‚‹ã“ã¨

---

## æ³¨æ„äº‹é …

1. **èª¤æ¤œçŸ¥é˜²æ­¢**: ã€Œä½¿ã„æ–¹ã€ã¨ã„ã†å˜èªã ã‘ã§ã¯æ¤œçŸ¥ã—ãªã„ã‚ˆã†ã€æ˜ç¢ºãªã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰åˆ¤å®šã‚’å®Ÿè£…ã™ã‚‹

2. **ã‚»ãƒƒã‚·ãƒ§ãƒ³ãªã—ã®å ´åˆ**: `sse_session_id`ãŒãªã„å ´åˆã§ã‚‚ã€ãƒ˜ãƒ«ãƒ—æ©Ÿèƒ½ã¯å‹•ä½œã™ã‚‹ï¼ˆçŠ¶æ…‹ã¯ä¿å­˜ã•ã‚Œãªã„ãŒã€å¿œç­”ã¯è¿”ã™ï¼‰

3. **é€šå¸¸å‡¦ç†ã¨ã®ç«¶åˆ**: ãƒ˜ãƒ«ãƒ—ãƒ¢ãƒ¼ãƒ‰ä¸­ã§ã‚‚ã€é€šå¸¸ã®ãƒãƒ£ãƒƒãƒˆå…¥åŠ›ã§é€šå¸¸å‡¦ç†ã«é€²ã‚ã‚‹ã‚ˆã†ã«ã™ã‚‹

4. **plan_friendly.mdã¨ã®æ•´åˆæ€§**: å®Ÿè£…å†…å®¹ã¯`plan_friendly.md`ã®å†…å®¹ã¨å®Œå…¨ã«ä¸€è‡´ã•ã›ã‚‹

5. **ãƒ­ã‚°å‡ºåŠ›**: ãƒ˜ãƒ«ãƒ—ãƒ¢ãƒ¼ãƒ‰ã®é–‹å§‹ãƒ»çµ‚äº†ãƒ»çŠ¶æ…‹é·ç§»ã‚’ãƒ­ã‚°ã«è¨˜éŒ²ã™ã‚‹

---

## è¿½åŠ ã®æ”¹å–„æ¡ˆï¼ˆå°†æ¥ï¼‰

1. **ãƒ˜ãƒ«ãƒ—å±¥æ­´**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ãŸãƒ˜ãƒ«ãƒ—ã®å±¥æ­´ã‚’ä¿å­˜ã—ã€ã‚ˆãè¦‹ã‚‹éƒ¨åˆ†ã‚’å„ªå…ˆè¡¨ç¤º

2. **æ¤œç´¢æ©Ÿèƒ½**: ãƒ˜ãƒ«ãƒ—å†…å®¹ã‚’æ¤œç´¢ã§ãã‚‹æ©Ÿèƒ½

3. **ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ**: ã€Œ1ã€ã ã‘ã§ãªãã€Œåœ¨åº«ã€ã€ŒçŒ®ç«‹ã€ãªã©ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§ã‚‚è©³ç´°ã«é·ç§»

4. **ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ˜ãƒ«ãƒ—**: ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã‚„ç‰¹å®šã®çŠ¶æ³ã§ã€é–¢é€£ã™ã‚‹ãƒ˜ãƒ«ãƒ—ã‚’è‡ªå‹•è¡¨ç¤º

---

## ã¾ã¨ã‚

- **å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«æ•°**: 2ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆæ–°è¦1ã€ä¿®æ­£1ï¼‰
- **ãƒ˜ãƒ«ãƒ—éšå±¤æ•°**: 2éšå±¤ï¼ˆå…¨ä½“æ¦‚è¦ â†’ æ©Ÿèƒ½åˆ¥è©³ç´°ï¼‰
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“**: æ®µéšçš„ã§è‡ªç„¶ãªãƒ˜ãƒ«ãƒ—ã®æ˜ã‚Šä¸‹ã’
- **èª¤æ¤œçŸ¥é˜²æ­¢**: æ˜ç¢ºãªã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰åˆ¤å®šã§å®Ÿç¾
- **æŸ”è»Ÿæ€§**: é€šå¸¸ã®ãƒãƒ£ãƒƒãƒˆå…¥åŠ›ã§ã„ã¤ã§ã‚‚å¾©å¸°å¯èƒ½

